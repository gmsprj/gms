#!/bin/bash
#
# DBのテーブルを初期化する。
#

gm-cleardb 
if [ $? -ne 0 ]; then
    exit 1
fi

gm-sitesadd "GMS `git branch | grep \* | sed 's/\* //g'`" "`cat <<EOT
労働者のユニオン・サイトです。\nギルド（同業者組合）に参加することで議論に参加できます。\nギルドではスレッドによる雑談・話し合い、文書の提案などが行えます。\nギルドの文書は、例えば仕事のマニュアルや、理由等を付けた相場の公開などに使えるでしょう。\\nギルドへの参加にはユーザー登録が必要です。サインアップしてギルドに参加してみましょう。\n
EOT
`"
if [ $? -ne 0 ]; then
    exit 1
fi

# このユーザーはゲストのポストで参照される null 的な users 
gm-usersadd "名無しさん" "gms@gms.com"
if [ $? -ne 0 ]; then
    exit 1
fi

gm-guildsadd "練習用ギルド" "練習用のギルドです。"
gm-guildsadd "開発者ギルド" "開発者のギルドです。"
gm-guildsadd "プログラマーギルド" "Hello, World!"
gm-guildsadd "Webデザイナーギルド" "Hello, World!"
gm-guildsadd "Web制作管理ギルド" "Hello, World!"
gm-guildsadd "介護士ギルド" "(｀・ω・´)"
gm-guildsadd "保育士ギルド" "(｀・ω・´)"
gm-guildsadd "イラストレーターギルド" "(｀・ω・´)"
gm-guildsadd "アニメーターギルド" "(｀・ω・´)"
if [ $? -ne 0 ]; then
    exit 1
fi

gm-boardsadd "ロビー板" "ロビー板です。ゲストも書き込みできます。"
if [ $? -ne 0 ]; then
    exit 1
fi

gm-newsadd "システムが初期化されました。"
if [ $? -ne 0 ]; then
    exit 1
fi

exit 0

