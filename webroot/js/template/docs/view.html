<div class="container">
    <div class="row">
        <div class="col-sm-12">
            <h3>{{ $ctrl.doc.name }} {{ $ctrl.doc.state == 'draft' ? '(提案)' : '' }}</h3>
            <div ng-switch on="$ctrl.doc.state">
                <div ng-switch-when="published">
                    この文書は公開されています。
                </div>
                <div ng-switch-when="draft">
                    これは<a target="_self" href="/guilds/view/{{ $ctrl.doc.ownerId }}">{{ $ctrl.doc.ownerName }}</a>で提案されている文書です。
                </div>
                <div ng-switch-default>
                    この文書の詳細は不明です\(´・ω・｀)/ｽﾞｺｰ
                </div>
            </div>
        </div>
    </div>
    <hr/>

    <div class="row" ng-if="$ctrl.authUser">
        <div class="col-sm-12">
            <a target="_self" href="/docs/edit/{{ $ctrl.doc.id }}">編集する</a>
        </div>
        <hr/>
    </div>

    <div class="row">
        <div class="col-sm-12">
            <h4>概要</h4>
            <ul>
                <li>文書ID: {{ $ctrl.doc.id }}</li>
                <li>文書タイトル: {{ $ctrl.doc.name }}</li>
                <li>タグ: <a href="#">マニュアル</a> <a href="#">ギルド</a> <a href="#">初心者</a></li>
                <li>作成ギルド: <a target="_self" href="/guilds/view/{{ $ctrl.doc.ownerId }}">{{ $ctrl.doc.ownerName }}</a></li>
                <li>参照先スレッド: <a ng-repeat="el in $ctrl.threads" target="_self" href="/threads/view/{{ el.id }}">{{ el.name }}</a> </li>
                <li>状態: {{ $ctrl.doc.state }}</li>
                <li>作成日: {{ $ctrl.doc.created }}</li>
                <li>最終更新日: {{ $ctrl.doc.modified }}</li>
            </ul>
        </div>
    </div>
    <hr/>

    <div class="row">
        <div class="col-sm-12">
            <h4>内容</h4>
            <p style="white-space: pre;">{{ $ctrl.doc.content }}</p>
        </div>
    </div>
    <hr/>

    <div ng-if="$ctrl.threads && $ctrl.threads.length > 0">
        <div class="row">
            <div class="col-sm-12">
                <div ng-repeat="thread in $ctrl.threads">
                    <h4>参照先スレッド (<a target="_self" href="/threads/view/{{ thread.id }}">{{ thread.name }}</a>)</h4>
                    <ul ng-repeat="post in thread.posts">
                        <li>{{ $index+1 }}: {{ post.name }}: {{ post.content }}</li>
                    </ul>
                </div>
            </div>
        </div>
        <hr/>
    </div>

</div>

